<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="687px" preserveAspectRatio="none" style="width:1090px;height:687px;background:#FFFFFF;" version="1.1" viewBox="0 0 1090 687" width="1090px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="31" x2="31" y1="96.375" y2="601.0332"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="145" x2="145" y1="96.375" y2="601.0332"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="236" x2="236" y1="96.375" y2="601.0332"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="566.5" x2="566.5" y1="96.375" y2="601.0332"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="871.5" x2="871.5" y1="96.375" y2="601.0332"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="972.5" x2="972.5" y1="96.375" y2="601.0332"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="52" x="5" y="64.8867"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="12" y="85.4219">DApp</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="52" x="5" y="600.0332"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="12" y="620.5684">DApp</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="100" y="64.8867"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="107" y="85.4219">Midnight.js</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="100" y="600.0332"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="107" y="620.5684">Midnight.js</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73" x="200" y="64.8867"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="207" y="85.4219">Contract</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73" x="200" y="600.0332"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="207" y="620.5684">Contract</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="188" x="472.5" y="64.8867"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="479.5" y="85.4219">Compact standard library</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="188" x="472.5" y="600.0332"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="479.5" y="620.5684">Compact standard library</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="807.5" y="64.8867"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="814.5" y="85.4219">Builtins/Runtime</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="807.5" y="600.0332"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="814.5" y="620.5684">Builtins/Runtime</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="945.5" y="64.8867"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="952.5" y="85.4219">Wallet</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="945.5" y="600.0332"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="952.5" y="620.5684">Wallet</text><polygon fill="#181818" points="133,123.6855,143,127.6855,133,131.6855,137,127.6855" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="31" x2="139" y1="127.6855" y2="127.6855"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="38" y="122.9434">call_contract</text><polygon fill="#181818" points="224.5,152.9961,234.5,156.9961,224.5,160.9961,228.5,156.9961" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="145" x2="230.5" y1="156.9961" y2="156.9961"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="152" y="152.2539">call</text><polygon fill="#181818" points="554.5,182.3066,564.5,186.3066,554.5,190.3066,558.5,186.3066" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="236.5" x2="560.5" y1="186.3066" y2="186.3066"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="306" x="243.5" y="181.5645">mint_token(domain_sep, value, nonce, recipient)</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="566.5" x2="608.5" y1="215.6172" y2="215.6172"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="608.5" x2="608.5" y1="215.6172" y2="228.6172"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="567.5" x2="608.5" y1="228.6172" y2="228.6172"/><polygon fill="#181818" points="577.5,224.6172,567.5,228.6172,577.5,232.6172,573.5,228.6172" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="573.5" y="210.875">token_type(domain_sep, ledger.self())</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="566.5" x2="608.5" y1="257.9277" y2="257.9277"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="608.5" x2="608.5" y1="257.9277" y2="270.9277"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="567.5" x2="608.5" y1="270.9277" y2="270.9277"/><polygon fill="#181818" points="577.5,266.9277,567.5,270.9277,577.5,274.9277,573.5,270.9277" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="573.5" y="253.1855">new CoinInfo(token_type, value, nonce)</text><polygon fill="#181818" points="859.5,296.2383,869.5,300.2383,859.5,304.2383,863.5,300.2383" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="566.5" x2="865.5" y1="300.2383" y2="300.2383"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="573.5" y="295.4961">mint(domain_sep, value, nonce)</text><polygon fill="#181818" points="156,325.5488,146,329.5488,156,333.5488,152,329.5488" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="150" x2="565.5" y1="329.5488" y2="329.5488"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="162" y="324.8066">create_zswap_output(coin, recipient)</text><polygon fill="#181818" points="859.5,354.8594,869.5,358.8594,859.5,362.8594,863.5,358.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="566.5" x2="865.5" y1="358.8594" y2="358.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="281" x="573.5" y="354.1172">claim_zswap_coin_spend(coin_commitment)</text><polygon fill="#181818" points="247.5,384.1699,237.5,388.1699,247.5,392.1699,243.5,388.1699" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="241.5" x2="565.5" y1="388.1699" y2="388.1699"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="253.5" y="383.4277">coin</text><polygon fill="#181818" points="156,413.4805,146,417.4805,156,421.4805,152,417.4805" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="150" x2="235.5" y1="417.4805" y2="417.4805"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="162" y="412.7383">coin</text><polygon fill="#181818" points="961,442.791,971,446.791,961,450.791,965,446.791" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="145" x2="967" y1="446.791" y2="446.791"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="152" y="442.0488">balance(transaction)</text><path d="M867,459.791 L867,484.791 L1078,484.791 L1078,469.791 L1068,459.791 L867,459.791 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1068,459.791 L1068,469.791 L1078,469.791 L1068,459.791 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="873" y="477.3594">No need to balance new token</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="973" x2="1015" y1="511.4121" y2="511.4121"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1015" x2="1015" y1="511.4121" y2="524.4121"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="974" x2="1015" y1="524.4121" y2="524.4121"/><polygon fill="#181818" points="984,520.4121,974,524.4121,984,528.4121,980,524.4121" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="980" y="506.6699">balance_dust()</text><polygon fill="#181818" points="156,549.7227,146,553.7227,156,557.7227,152,553.7227" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="150" x2="972" y1="553.7227" y2="553.7227"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="162" y="548.9805">balanced_transaction</text><polygon fill="#181818" points="42,579.0332,32,583.0332,42,587.0332,38,583.0332" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="36" x2="144" y1="583.0332" y2="583.0332"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="48" y="578.291">transaction_id</text><rect height="58.8867" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="118" x="964" y="5"/><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="49" x="1033" y="14.668">mint.puml</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="118" x="964" y="26.4453">2023.12.30 at 14:57 CET</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="3" x="1079" y="38.2227"> </text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="3" x="1079" y="50"> </text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="3" x="1079" y="61.7773"> </text><rect height="47.1094" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="200" x="441" y="632.5215"/><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="3" x="539.5" y="642.1895"> </text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="3" x="539.5" y="653.9668"> </text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="3" x="539.5" y="665.7441"> </text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="200" x="441" y="677.5215">Copyright 2023, Input Output Global, Ltd.</text><!--MD5=[0b8c623148f0b66b26f1632c275597f4]
@startuml "Mint"

'- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
' Please include this standard header
header %filename()\n%date("yyyy.MM.dd' at 'HH:mm z")\n\n\n
'- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

participant DApp

participant "Midnight.js" as mnjs

participant Contract

participant "Compact standard library" as cstd

participant "Builtins/Runtime" as runtime

participant "Wallet"


DApp - -> mnjs : call_contract
mnjs - -> Contract : call
Contract - -> cstd : mint_token(domain_sep, value, nonce, recipient)
cstd - -> cstd : token_type(domain_sep, ledger.self())
cstd - -> cstd : new CoinInfo(token_type, value, nonce)
cstd - -> runtime : mint(domain_sep, value, nonce)
cstd - -> mnjs : create_zswap_output(coin, recipient)
cstd - -> runtime : claim_zswap_coin_spend(coin_commitment)
cstd - -> Contract : coin
Contract - -> mnjs : coin
mnjs - -> Wallet : balance(transaction)
note over Wallet : No need to balance new token
Wallet - -> Wallet : balance_dust()
Wallet - -> mnjs : balanced_transaction
mnjs - -> DApp : transaction_id
'- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
' Please include this standard footer
footer \n\n\nCopyright %date("yyyy"), Input Output Global, Ltd.
'- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -


@enduml

@startuml "Mint"

header mint.puml\n2023.12.30 at 14:57 CET\n\n\n

participant DApp

participant "Midnight.js" as mnjs

participant Contract

participant "Compact standard library" as cstd

participant "Builtins/Runtime" as runtime

participant "Wallet"


DApp - -> mnjs : call_contract
mnjs - -> Contract : call
Contract - -> cstd : mint_token(domain_sep, value, nonce, recipient)
cstd - -> cstd : token_type(domain_sep, ledger.self())
cstd - -> cstd : new CoinInfo(token_type, value, nonce)
cstd - -> runtime : mint(domain_sep, value, nonce)
cstd - -> mnjs : create_zswap_output(coin, recipient)
cstd - -> runtime : claim_zswap_coin_spend(coin_commitment)
cstd - -> Contract : coin
Contract - -> mnjs : coin
mnjs - -> Wallet : balance(transaction)
note over Wallet : No need to balance new token
Wallet - -> Wallet : balance_dust()
Wallet - -> mnjs : balanced_transaction
mnjs - -> DApp : transaction_id
footer \n\n\nCopyright 2023, Input Output Global, Ltd.


@enduml

PlantUML version 1.2022.3(Tue Mar 29 18:10:57 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: PL
--></g></svg>