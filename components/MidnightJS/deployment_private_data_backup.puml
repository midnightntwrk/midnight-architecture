@startuml
skinparam titleFontSize 25

title Midnight.js Deployment Diagram

node "Client Device" <<device>> {
    node Browser <<EE>> {
        component GUI
        artifact "Web Page" as WP {
            artifact Contract
            artifact Witnesses
            artifact "UI Components" as UC
            folder "Prover Keys"
            folder "Verifier Keys"
            folder ZKIR
        }
        artifact MidnightJS {
            artifact Contracts
            artifact PublicDataProvider
            artifact PrivateDataProvider
            artifact ZKConfigProvider
            artifact WalletProvider
            artifact NodeProvider
            artifact ProofProvider
        }
        node Extensions <<EE>> {
            component "Lace Wallet" as LW {
                artifact Wallet
            }
            component "Private Data Manager" as PDM
        }
        artifact DappConnector
        artifact Ledger
        artifact "Compact Runtime" as CR
        artifact "Impact Runtime" as IR
    }
    database "File System" as FS
    component "Proof Server" as PS {
    }
    artifact compactc {
    }
}

node Indexer <<device>>
node "Substrate Node" <<device>> as SN


Contract --> Witnesses
UC --> Contract
UC --> MidnightJS
Contracts -> PublicDataProvider
Contracts --> PrivateDataProvider
Contracts --> ZKConfigProvider
Contracts --> WalletProvider
Contracts --> NodeProvider
Contracts --> ProofProvider
Contracts --> Ledger
Contracts --> CR
IR <-u- CR
LW --> Indexer

Ledger --> IR
compactc -[dashed]-> Contract: produces
NodeProvider --> DappConnector
WalletProvider --> DappConnector
LW <-u- DappConnector
PublicDataProvider --> Indexer
SN <-d- Indexer
SN --> Ledger
ProofProvider -d-> PS
ZKConfigProvider --> "Prover Keys"
ZKConfigProvider --> "Verifier Keys"
ZKConfigProvider --> "ZKIR"
PrivateDataProvider --> PDM
PDM --> FS
LW --> SN
GUI --> UC
@enduml
