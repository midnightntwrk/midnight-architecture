<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="762px" preserveAspectRatio="none" style="width:503px;height:762px;background:#FFFFFF;" version="1.1" viewBox="0 0 503 762" width="503px" zoomAndPan="magnify"><defs/><g><g id="pending"><rect fill="#F1F1F1" height="69.4648" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="219" x="26.77" y="103"/><line style="stroke:#181818;stroke-width:0.5;" x1="26.77" x2="245.77" y1="129.4883" y2="129.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="108.27" y="121.5352">Pending</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="199" x="31.77" y="148.0234">Coin expected to be received</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="31.77" y="164.5117">Part of pending balance</text></g><g id="confirmed"><rect fill="#F1F1F1" height="69.4648" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="355" x="94.77" y="249"/><line style="stroke:#181818;stroke-width:0.5;" x1="94.77" x2="449.77" y1="275.4883" y2="275.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="235.77" y="267.5352">Confirmed</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="335" x="99.77" y="294.0234">Coin received in a transaction added to the chain</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="99.77" y="310.5117">Part of pending balance</text></g><g id="final"><rect fill="#F1F1F1" height="69.4648" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="286" x="129.27" y="395"/><line style="stroke:#181818;stroke-width:0.5;" x1="129.27" x2="415.27" y1="421.4883" y2="421.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="255.77" y="413.5352">Final</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="266" x="134.27" y="440.0234">Coin received in a finalized transaction</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166" x="134.27" y="456.5117">Part of available balance</text></g><g id="booked"><rect fill="#F1F1F1" height="69.4648" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="225" x="158.77" y="541"/><line style="stroke:#181818;stroke-width:0.5;" x1="158.77" x2="383.77" y1="567.4883" y2="567.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="245.77" y="559.5352">Booked</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="205" x="163.77" y="586.0234">Coin booked for a transaction</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="163.77" y="602.5117">Not part of balance</text></g><g id="spent"><rect fill="#F1F1F1" height="69.4648" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="265" x="138.77" y="687"/><line style="stroke:#181818;stroke-width:0.5;" x1="138.77" x2="403.77" y1="713.4883" y2="713.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="251.77" y="705.5352">Spent</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="245" x="143.77" y="732.0234">Coin that was spent in a transaction</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="143.77" y="748.5117">Not part of balance</text></g><ellipse cx="216.27" cy="16" fill="#222222" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><ellipse cx="48.27" cy="429.5" fill="none" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="48.77" cy="430" fill="#222222" rx="6" ry="6" style="stroke:none;stroke-width:1.0;"/><!--MD5=[2f510e666f67c9c7db9cedbb83d33df7]
link *start to confirmed--><g id="link_*start_confirmed"><path d="M224.65,22.31 C234.55,29 250.87,41.41 260.27,56 C297.04,113.08 295.16,134.86 305.27,202 C306.4,209.47 307.06,211.66 305.27,219 C303.3,227.08 300.1,235.27 296.45,242.97 " fill="none" id="*start-to-confirmed" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="294.26,247.4,301.8305,241.1003,296.4732,242.9165,294.6569,237.5591,294.26,247.4" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="302.27" y="142.5684">apply(receive)</text></g><!--MD5=[1938bc6a853a11b9ef2efe3ae926af70]
link *start to pending--><g id="link_*start_pending"><path d="M206.09,18.3 C187.75,21.25 149.57,30.33 133.27,56 C125.73,67.88 124.58,82.85 125.96,96.65 " fill="none" id="*start-to-pending" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="126.57,101.39,129.3793,91.9503,125.927,96.4315,121.4458,92.9792,126.57,101.39" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38" x="134.27" y="69.5684">spend</text></g><!--MD5=[1938bc6a853a11b9ef2efe3ae926af70]
link *start to pending--><g id="link_*start_pending"><path d="M211.02,24.84 C201.28,39.4 179.8,71.48 162.35,97.54 " fill="none" id="*start-to-pending-1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="159.76,101.41,168.093,96.1601,162.5434,97.2563,161.4472,91.7067,159.76,101.41" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="189.27" y="69.5684">watch_for</text></g><!--MD5=[ebcf6dbfe2a2f920bd60ed608d75eebb]
link pending to confirmed--><g id="link_pending_confirmed"><path d="M168.16,172.26 C188.53,193.84 215.01,221.87 236.16,244.26 " fill="none" id="pending-to-confirmed" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="239.55,247.85,236.2752,238.5615,236.1156,244.2161,230.461,244.0565,239.55,247.85" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="210.27" y="215.5684">apply(receive)</text></g><!--MD5=[84a6e6579109df2776c5b9ea88122c19]
link confirmed to pending--><g id="link_confirmed_pending"><path d="M169.99,248.71 C157.93,240.75 147.14,230.98 139.27,219 C131.55,207.24 129.43,192.3 129.71,178.48 " fill="none" id="confirmed-to-pending" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="129.92,173.74,125.5372,182.5599,129.7053,178.7354,133.5298,182.9035,129.92,173.74" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="140.27" y="215.5684">rollback</text></g><!--MD5=[08c40ba825df0a82f4fa6bc0b125ff1a]
link confirmed to final--><g id="link_confirmed_final"><path d="M272.27,318.26 C272.27,339.3 272.27,366.46 272.27,388.56 " fill="none" id="confirmed-to-final" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="272.27,393.44,276.27,384.44,272.27,388.44,268.27,384.44,272.27,393.44" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="273.27" y="361.5684">finalize</text></g><!--MD5=[3600fad52994415f4c4d7ea48ac0e995]
link confirmed to *end--><g id="link_confirmed_*end"><path d="M219.47,318.44 C167.6,351.79 91.95,400.42 61.6,419.93 " fill="none" id="confirmed-to-*end" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="57.75,422.41,67.4859,420.9229,61.9601,419.7127,63.1703,414.1868,57.75,422.41" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="168.27" y="361.5684">discard</text></g><!--MD5=[021823178568b7707d3380c4e2f68a78]
link final to booked--><g id="link_final_booked"><path d="M210.88,464.35 C200.95,472.68 192.04,482.57 186.27,494 C178.21,509.98 185.75,524.48 199.11,536.65 " fill="none" id="final-to-booked" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="202.7,539.7,198.4506,530.8151,198.8967,536.4543,193.2574,536.9004,202.7,539.7" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="187.27" y="507.5684">spend|apply(spend)</text></g><!--MD5=[5e1c41f066f0d576b546afa8f8482164]
link booked to final--><g id="link_booked_final"><path d="M300.3,540.59 C306.43,531.53 312.03,521.37 315.27,511 C319.7,496.84 315.13,482.27 307.57,469.49 " fill="none" id="booked-to-final" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="304.97,465.4,306.4187,475.1417,307.6507,469.6207,313.1718,470.8526,304.97,465.4" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="317.27" y="507.5684">discard</text></g><!--MD5=[901e9184569f076a7f827bdaf352323d]
link booked to spent--><g id="link_booked_spent"><path d="M244.41,610.32 C238.61,619.45 233.31,629.68 230.27,640 C226.12,654.08 230.49,668.63 237.7,681.43 " fill="none" id="booked-to-spent" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="240.17,685.5,238.9073,675.7324,237.5703,681.229,232.0737,679.892,240.17,685.5" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="231.27" y="653.5684">apply</text></g><!--MD5=[b4e3cd3b3b4f620d7c91309b064b9802]
link spent to booked--><g id="link_spent_booked"><path d="M271.27,686.95 C271.27,665.96 271.27,638.79 271.27,616.66 " fill="none" id="spent-to-booked" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="271.27,611.78,267.27,620.78,271.27,616.78,275.27,620.78,271.27,611.78" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="272.27" y="653.5684">rollback</text></g><!--MD5=[262a8a37479eab7cd54854f87ff39543]
link booked to booked--><g id="link_booked_booked"><path d="M384.13,562.59 C404.51,564.25 418.77,568.55 418.77,575.5 C418.77,581.69 407.46,585.78 390.59,587.77 " fill="none" id="booked-to-booked" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="385.64,588.26,394.9863,591.3659,390.6163,587.7738,394.2084,583.4038,385.64,588.26" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="424.77" y="580.5684">rollback</text></g><!--MD5=[60ce465aa68d075a3a61b170d7ba18c7]
link pending to *end--><g id="link_pending_*end"><path d="M89.62,172.33 C66.78,191.86 41.6,218.55 29.27,249 C6,306.49 30.07,382.38 42.19,413.85 " fill="none" id="pending-to-*end" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="44.01,418.47,44.4075,408.6292,42.1654,413.8227,36.9718,411.5806,44.01,418.47" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="30.27" y="288.5684">discard</text></g><!--MD5=[944a748e4e2a5f0eef86b1e9d3c1a1e9]
link spent to spent--><g id="link_spent_spent"><path d="M403.97,708.96 C424.66,710.83 438.77,715.01 438.77,721.5 C438.77,727.33 427.38,731.3 410.06,733.4 " fill="none" id="spent-to-spent" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="405.47,733.89,414.8425,736.916,410.442,733.3614,413.9967,728.9609,405.47,733.89" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="444.77" y="726.5684">finalize</text></g><!--MD5=[db06249143dcfd5aa0bbe2a84dad081d]
@startuml

state pending as "Pending": Coin expected to be received\nPart of pending balance
state confirmed as "Confirmed": Coin received in a transaction added to the chain\nPart of pending balance
state final as "Final": Coin received in a finalized transaction\nPart of available balance
state booked as "Booked": Coin booked for a transaction\nNot part of balance
state spent as "Spent" : Coin that was spent in a transaction\nNot part of balance

[*] - -> confirmed : apply(receive)
[*] - -> pending : spend
[*] - -> pending : watch_for
pending - -> confirmed : apply(receive)
confirmed - -> final : finalize
confirmed - -> pending : rollback
confirmed - -> [*] : discard
final - -> booked : spend|apply(spend)

booked - -> spent : apply
booked - -> booked : rollback
booked - -> final : discard
pending - -> [*] : discard
spent - -> booked : rollback
spent - -> spent : finalize

@enduml

PlantUML version 1.2022.3(Tue Mar 29 18:10:57 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: PL
--></g></svg>