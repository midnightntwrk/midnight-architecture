<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="629px" preserveAspectRatio="none" style="width:961px;height:629px;background:#FFFFFF;" version="1.1" viewBox="0 0 961 629" width="961px" zoomAndPan="magnify"><defs/><g><g id="pending"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="472.5" y="143"/><line style="stroke:#181818;stroke-width:0.5;" x1="472.5" x2="548.5" y1="169.4883" y2="169.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="482.5" y="161.5352">Pending</text></g><g id="failed"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="61" x="595" y="549"/><line style="stroke:#181818;stroke-width:0.5;" x1="595" x2="656" y1="575.4883" y2="575.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="605" y="567.5352">Failed</text></g><g id="expected"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="649" y="143"/><line style="stroke:#181818;stroke-width:0.5;" x1="649" x2="732" y1="169.4883" y2="169.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="659" y="161.5352">Expected</text></g><ellipse cx="690.5" cy="16" fill="#222222" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#F1F1F1" height="98.4883" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="435" x="519" y="310"/><rect fill="#FFFFFF" height="70" rx="12.5" ry="12.5" style="stroke:#FFFFFF;stroke-width:1.0;" width="433" x="520" y="337.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="519" x2="954" y1="336.4883" y2="336.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="700" y="328.5352">Confirmed</text><g id="confirmed.succeededEntirely"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="531" y="348.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="531" x2="679" y1="374.9766" y2="374.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="541" y="367.0234">Succeeded Entirely</text></g><g id="confirmed.failFallible"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="114" x="697" y="348.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="697" x2="811" y1="374.9766" y2="374.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="707" y="367.0234">Fallible Failed</text></g><g id="confirmed.failEntirely"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="829" y="348.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="829" x2="945" y1="374.9766" y2="374.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="839" y="367.0234">Failed Entirely</text></g><rect fill="#F1F1F1" height="98.4883" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="435" x="7" y="525"/><rect fill="#FFFFFF" height="70" rx="12.5" ry="12.5" style="stroke:#FFFFFF;stroke-width:1.0;" width="433" x="8" y="552.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="7" x2="442" y1="551.4883" y2="551.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="208" y="543.5352">Final</text><g id="final.succeededEntirelyF"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="19" y="563.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="19" x2="167" y1="589.9766" y2="589.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="29" y="582.0234">Succeeded Entirely</text></g><g id="final.failFallibleF"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="114" x="185" y="563.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="185" x2="299" y1="589.9766" y2="589.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="195" y="582.0234">Fallible Failed</text></g><g id="final.failEntirelyF"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="317" y="563.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="317" x2="433" y1="589.9766" y2="589.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="327" y="582.0234">Failed Entirely</text></g><!--MD5=[1938bc6a853a11b9ef2efe3ae926af70]
link *start to pending--><g id="link_*start_pending"><path d="M683.22,23.07 C660.23,42.22 588.14,102.3 544.69,138.51 " fill="none" id="*start-to-pending" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="540.97,141.61,550.4408,138.9073,544.8064,138.4034,545.3103,132.7691,540.97,141.61" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38" x="618.5" y="89.5684">spend</text></g><!--MD5=[2f510e666f67c9c7db9cedbb83d33df7]
link *start to confirmed--><g id="link_*start_confirmed"><path d="M699.93,19.99 C718.96,26.58 761.65,44.35 779.5,76 C819.71,147.28 805.63,180.43 786.5,260 C782.89,275 776.59,290.29 769.64,304.2 " fill="none" id="*start-to-confirmed" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="767.53,308.31,775.1961,302.1269,769.8116,303.8609,768.0776,298.4764,767.53,308.31" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="806.5" y="173.0684">apply</text></g><!--MD5=[9520415049eb9f07e8ccd5c169b2b428]
link *start to expected--><g id="link_*start_expected"><path d="M690.5,26.38 C690.5,48 690.5,102.09 690.5,136.53 " fill="none" id="*start-to-expected" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="690.5,141.21,694.5,132.21,690.5,136.21,686.5,132.21,690.5,141.21" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="691.5" y="89.5684">watch_for</text></g><!--MD5=[5bad0fa7eb53096bf8ad3d660e5a265f]
link expected to confirmed--><g id="link_expected_confirmed"><path d="M702.68,193.42 C709.23,207.57 716.9,225.92 721.5,243 C726.7,262.3 730.12,283.93 732.37,303.17 " fill="none" id="expected-to-confirmed" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="732.91,308.1,735.8828,298.7105,732.3531,303.1311,727.9325,299.6015,732.91,308.1" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="726.5" y="256.5684">apply</text></g><!--MD5=[ebcf6dbfe2a2f920bd60ed608d75eebb]
link pending to confirmed--><g id="link_pending_confirmed"><path d="M539.58,193.32 C573.4,221.6 630.19,269.09 674.12,305.83 " fill="none" id="pending-to-confirmed" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="677.7,308.83,673.3597,299.9891,673.8636,305.6234,668.2292,306.1273,677.7,308.83" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="618.5" y="256.5684">apply</text></g><!--MD5=[84a6e6579109df2776c5b9ea88122c19]
link confirmed to pending--><g id="link_confirmed_pending"><path d="M584.06,309.59 C561.65,296.62 540.95,280.34 525.5,260 C512.53,242.93 509.03,218.83 508.63,199.72 " fill="none" id="confirmed-to-pending" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="508.61,194.96,504.6615,203.9827,508.6386,199.9599,512.6614,203.937,508.61,194.96" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="526.5" y="256.5684">rollback</text></g><!--MD5=[08c40ba825df0a82f4fa6bc0b125ff1a]
link confirmed to final--><g id="link_confirmed_final"><path d="M620,408.47 C538.45,442.39 429.7,487.63 346.88,522.09 " fill="none" id="confirmed-to-final" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="342.36,523.97,352.2064,524.19,346.9733,522.0419,349.1214,516.8087,342.36,523.97" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="497.5" y="471.5684">finalize</text></g><!--MD5=[429205cb9cae259107c53dca96386237]
link pending to failed--><g id="link_pending_failed"><path d="M488.75,193.31 C466.63,219.82 433.77,264.56 420.5,310 C408.29,351.81 414.2,364.9 420.5,408 C424.99,438.75 420.79,450.97 440.5,475 C479.27,522.28 546.98,549.74 588.84,563.01 " fill="none" id="pending-to-failed" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="593.38,564.42,585.9584,557.9454,588.602,562.9466,583.6009,565.5902,593.38,564.42" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="421.5" y="364.0684">discard</text></g><!--MD5=[7a231837c0e8f21e3533b5f68bfdfc01]
reverse link pending to final--><g id="link_pending_final"><path d="M466.93,195.18 C428.04,220.43 371.78,261.83 335.5,310 C285.41,376.51 253.26,468.99 237.07,524.71 " fill="none" id="pending-backto-final" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="470.79,192.7,461.0541,194.1871,466.5799,195.3973,465.3697,200.9232,470.79,192.7" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="336.5" y="364.0684">rollback</text></g><!--MD5=[ce932b8a8c7ee8a7f124175b523bca00]
link confirmed to failed--><g id="link_confirmed_failed"><path d="M711.31,408.33 C689.7,449.81 659.23,508.27 641.02,543.22 " fill="none" id="confirmed-to-failed" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="638.9,547.28,646.6135,541.1561,641.2158,542.8486,639.5233,537.4509,638.9,547.28" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="685.5" y="471.5684">discard</text></g><!--MD5=[9f2e169d5216f3e95fca7a0409f1ba25]
@startuml

'skinparam linetype polyline
skinparam nodesep 100
skinparam ranksep 100

state confirmed as "Confirmed" {
  state succeededEntirely as "Succeeded Entirely"
  state failFallible as "Fallible Failed"
  state failEntirely as "Failed Entirely"
}
state pending as "Pending"

state final as "Final" {
  state succeededEntirelyF as "Succeeded Entirely"
  state failFallibleF as "Fallible Failed"
  state failEntirelyF as "Failed Entirely"
}

state failed as "Failed"
state expected as "Expected"

[*] - -> pending : spend
[*] - -> confirmed : apply
[*] - -> expected : watch_for
expected - -> confirmed : apply
pending - -> confirmed : apply
confirmed - -> final : finalize
confirmed - -> pending : rollback
pending - - -> failed : discard
pending <- - final : rollback
confirmed - -> failed : discard

@enduml

@startuml

skinparam nodesep 100
skinparam ranksep 100

state confirmed as "Confirmed" {
  state succeededEntirely as "Succeeded Entirely"
  state failFallible as "Fallible Failed"
  state failEntirely as "Failed Entirely"
}
state pending as "Pending"

state final as "Final" {
  state succeededEntirelyF as "Succeeded Entirely"
  state failFallibleF as "Fallible Failed"
  state failEntirelyF as "Failed Entirely"
}

state failed as "Failed"
state expected as "Expected"

[*] - -> pending : spend
[*] - -> confirmed : apply
[*] - -> expected : watch_for
expected - -> confirmed : apply
pending - -> confirmed : apply
confirmed - -> final : finalize
confirmed - -> pending : rollback
pending - - -> failed : discard
pending <- - final : rollback
confirmed - -> failed : discard

@enduml

PlantUML version 1.2022.3(Tue Mar 29 18:10:57 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: PL
--></g></svg>